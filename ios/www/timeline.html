<!DOCTYPE html><html><head><title>ScienceKit</title><link rel="stylesheet" href="./css/style.css"><script src="cordova-2.6.0.js"></script><script src="childbrowser.js"></script><script src="jquery.min.js"></script><script src="socket.io.min.js"></script><script src="js/easeljs-0.6.0.min.js"></script><script src="js/canvas2image.js"></script><script src="js/base64.js"></script><script src="js/sciencekit.js"></script></head><body><!-- TODO: Remove this!--><!--h2 Exchange client's authorization grant for a client access token--><!--a(id="auth_link", href="javascript:void(0);") Authenticate ScienceKit--><!--p(id="token_response") no token received--><!--h2 Request Resource (on behalf of owner that granted authorization)--><!--a(id="account-list", href="javascript:void(0);") Request resource (using access token)--><!--p(id="resource_response") no resource received--><div id="logo" style="position: fixed; left: 80px; top: 0px; text-align: right; font-size: 30px; padding-right: 10px; z-index: 1001;" class="edge"><img id="logo" src="./img/sciencekit-logo.png" alt="sciencekit logo" style="margin-top: 0px; width: 230px;"></div><div id="top" style="text-align: right; font-size: 30px; padding-right: 10px; z-index: 1000;" class="edge"><!--a(a(href="javscript:void(0);", onclick="generateStory();") --><!--	img(src="./img/story-time.png", alt="story time")--><a href="javascript:void(0);" onclick="scrollTickle();"> <img src="./img/search.png" alt="search"></a><!--a(href="javascript:void(0);", onclick="showHiddenFrames();") --><!--	img(src="./img/history.png", alt="show whole story") --><a href="./timeline.html"> <img src="./img/refresh.png" alt="refresh"></a><a href="javscript:void(0);" onclick="scrollToTop();"> <img src="./img/up-arrow.png" alt="top"></a></div><div id="toolkit-options" style="position: fixed; right: 0px; top: 100px; text-align: right; font-size: 30px; padding-right: 10px; z-index: 1000;" class="edge"><a href="javascript:void(0);" onclick="openQuestionTool();"> <img src="./img/question.png" width="50px" alt="question"></a><br><a href="javascript:void(0);" onclick="openSketchTool();"> <img src="./img/cause-and-effect.png" width="50px" alt="observation"></a><br><a href="javascript:void(0);" onclick="openSketchTool();"> <img src="./img/step-by-step.png" width="50px" alt="sequence"></a><br><a href="javascript:void(0);" onclick="addThoughtWidget();scrollToBottom();"> <img src="./img/thought.png" width="50px" alt="thought"></a><br><a href="javascript:void(0);" onclick="capturePhotoToURI();"> <img src="./img/camera.png" width="50px" alt="image"></a><br><a href="javascript:void(0);" onclick="captureVideo2();scrollToBottom();"> <img src="./img/video.png" width="50px" alt="video"></a><br><a href="javascript:void(0);" onclick="openSketchTool();"> <img src="./img/palette.png" width="50px" alt="sketch"></a><br><a href="javascript:void(0);" onclick="addThoughtWidget();scrollToBottom();"> <img src="./img/story.png" width="50px" alt="story"></a></div><div id="toolkit-tool-options" style="position: fixed; right: 0px; top: 100px; text-align: right; font-size: 30px; padding-right: 10px; z-index: 1000;" class="edge"><a href="javascript:void(0);" onclick="cancelTool();"> <img src="./img/cross-red.png" width="50px" alt="cancel"></a><br><a href="javascript:void(0);" onclick="saveTool();"> <img src="./img/check.png" width="50px" alt="done"></a></div><!----><!-- Templates for Timeline Widgets (this is not visible)--><!----><div id="narrative-templates" class="narrative-templates"><!-- Template timeline widgets--><ul id="narrative-list-template"><li id="thought-activity-template" data-activity-type="thought" data-id="" data-timeline="" class="activity-template"><div style="display: table; width: 100%;"><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="0" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #f16521; vertical-align: middle; padding-left: 22px; padding-top: 10px; font-size: 20px; color: #666666;" class="account">&nbsp;</div></div><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/thought.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #f16521;"><div class="activity-widget"><div style="display: table; width: 100%;" class="element-table"><!-- Core activity--><div style="display: table-row;" class="element"><div style="display: table-cell; min-width: 100%; vertical-align: middle;" contenteditable="true" class="text">-</div><div style="width: 150px; display: table-cell; text-align: right; vertical-align: top;" class="options"><img src="./img/love.png" class="bump"><img src="./img/cross-gray.png" class="hide"></div></div><!-- Divider--><div style="display: table-row;"><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div></div><!-- Tags--><div style="display: table-row;"><div contenteditable="true" style="display: table-cell; min-width: 100%; vertical-align: middle; font-size: 20px; color: #666666; padding-left: 40px; background-image: url(./img/topic.png); background-size: 30px 30px; background-repeat: no-repeat; height: 30px;" class="tags"><!--img(src="./img/topic.png", width="30", height="30", style="padding: 0px 8px 0px 0px; margin: 0px; vertical-align: middle;")-->&nbsp;</div><div style="width: 150px; display: table-cell; text-align: left;" class="options">&nbsp;</div></div></div></div></div></div></div></li><li id="topic-activity-template" data-activity-type="topic" data-id="" data-timeline="" class="activity-template"><div style="display: table; width: 100%;"><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/topic.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #00a14b;"><div class="activity-widget"><div style="display: table; width: 100%;" class="element-table"><!-- Core activity--><div style="display: table-row;" class="element"><div style="display: table-cell; vertical-align: middle;" contenteditable="true" class="text">&nbsp;</div><div style="width: 120px; display: table-cell; text-align: right; vertical-align: top;" class="options"><!--img(class="open", src="./img/open.png")--><img src="./img/cross-gray.png" class="hide"></div></div></div></div><div style="position: absolute; width: 100%; top: 43px; z-index: -1000;" class="timeline-branch"><div style="display: table; width: 100%;"><div style="display: table-row;"><div style="display: table-cell; min-width: 100px; height: 100px; background-image: url('./img/timeline-branch-right-green.png'); background-repeat: no-repeat;"></div> <div style="display: table-cell; background-image: url('./img/timeline-line-horizontal-green.png'); background-repeat: repeat-x; width: 100%;"></div> <div style="position: relative; display: table-cell; min-width: 100px; background-image: url('./img/timeline-go-green.png'); background-repeat: no-repeat;" class="timeline"><!--div(style="position: absolute; width: 30px; height: 30px; background-color: red; bottom: 60px; right: 10px; -webkit-transform: rotate(20deg); border-radius: 8px;")--><!--|--></div></div></div></div></div></div></div></li><li id="photo-template" data-activity-type="photo" data-id="" data-timeline="" class="activity-template"><div style="display: table; width: 100%;"><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="0" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #f16521; vertical-align: middle; padding-left: 22px; padding-top: 10px; font-size: 20px; color: #666666;" class="account">&nbsp;</div></div><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/camera.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #7e3f98;"><div class="activity-widget"><div style="display: table; width: 100%;" class="element-table"><!-- Core activity--><div style="display: table-row;" class="element"><img src="./img/camera.png" width="250" height="250" class="image"><div style="width: 120px; display: table-cell; text-align: right; vertical-align: top;" class="options"><!--img(class="open", src="./img/open.png")--><img src="./img/cross-gray.png" class="hide"></div></div><!-- Divider--><div style="display: table-row;"><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div></div><!-- Tags--><div style="display: table-row;"><div contenteditable="true" style="display: table-cell; min-width: 100%; vertical-align: middle; font-size: 20px; color: #666666; padding-left: 40px; background-image: url(./img/topic.png); background-size: 30px 30px; background-repeat: no-repeat; height: 30px;" class="tags"><!--img(src="./img/topic.png", width="30", height="30", style="padding: 0px 8px 0px 0px; margin: 0px; vertical-align: middle;")-->&nbsp;</div><div style="width: 150px; display: table-cell; text-align: left;" class="options">&nbsp;</div></div></div></div></div></div></div></li><li id="video-activity-template" data-activity-type="video" data-id="" data-timeline="" class="activity-template"><div style="display: table; width: 100%;"><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="0" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #f16521; vertical-align: middle; padding-left: 22px; padding-top: 40px; font-size: 20px; color: #666666;" class="account">&nbsp;</div></div><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/video.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #ed1c24;"><div class="activity-widget"><div style="display: table; width: 100%;" class="element-table"><!-- Core activity--><div style="display: table-row;" class="element"><video width="320" height="240" controls class="video"><source src="" class="source"></video><div style="width: 120px; display: table-cell; text-align: right; vertical-align: top;" class="options"><!--img(class="open", src="./img/open.png")--><img src="./img/cross-gray.png" class="hide"></div></div><!-- Divider--><div style="display: table-row;"><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div></div><!-- Tags--><div style="display: table-row;"><div contenteditable="true" style="display: table-cell; min-width: 100%; vertical-align: middle; font-size: 20px; color: #666666; padding-left: 40px; background-image: url(./img/topic.png); background-size: 30px 30px; background-repeat: no-repeat; height: 30px;" class="tags"><!--img(src="./img/topic.png", width="30", height="30", style="padding: 0px 8px 0px 0px; margin: 0px; vertical-align: middle;")-->&nbsp;</div><div style="width: 150px; display: table-cell; text-align: left;" class="options">&nbsp;</div></div></div></div></div></div></div></li><li id="motion-activity-template" data-activity-type="motion" data-id="" data-timeline="" class="activity-template"><div style="display: table; width: 100%;"><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="0" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #213f99; vertical-align: middle; padding-left: 22px; padding-top: 40px; font-size: 20px; color: #666666;" class="account">&nbsp;</div></div><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/graph.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #213f99;"><div class="activity-widget"><div style="display: table; width: 100%;" class="element-table"><!-- Core activity--><div style="display: table-row;" class="element"><div style="display: table-cell; min-width: 100%; vertical-align: middle;"><canvas width="320" height="240" class="canvas"></canvas></div><!--	| MOTION--><div style="width: 150px; display: table-cell; text-align: right; vertical-align: top;" class="options"><!--img(class="open", src="./img/open.png")--><img src="./img/cross-gray.png" class="hide"></div></div><!-- Divider--><div style="display: table-row;"><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div></div><!-- Tags--><div style="display: table-row;"><div contenteditable="true" style="display: table-cell; min-width: 100%; vertical-align: middle; font-size: 20px; color: #666666; padding-left: 40px; background-image: url(./img/topic.png); background-size: 30px 30px; background-repeat: no-repeat; height: 30px;" class="tags"><!--img(src="./img/topic.png", width="30", height="30", style="padding: 0px 8px 0px 0px; margin: 0px; vertical-align: middle;")-->&nbsp;</div><div style="width: 150px; display: table-cell; text-align: left;" class="options">&nbsp;</div></div></div></div><div style="position: absolute; width: 100%; bottom: -50px; z-index: -1000;" class="timeline-branch"><div style="display: table; width: 100%;"><div style="display: table-row;"><div style="display: table-cell; min-width: 100px; height: 100px; background-image: url('./img/timeline-branch-right-blue.png'); background-repeat: no-repeat;"></div> <div style="display: table-cell; background-image: url('./img/timeline-line-horizontal-blue.png'); background-repeat: repeat-x; width: 100%;"></div> <div style="position: relative; display: table-cell; min-width: 100px; background-image: url('./img/timeline-go-blue.png'); background-repeat: no-repeat;" class="timeline"><!--div(style="position: absolute; width: 30px; height: 30px; background-color: red; bottom: 60px; right: 10px; -webkit-transform: rotate(20deg); border-radius: 8px;")--><!--|--></div></div></div></div></div></div></div></li><li id="sketch-activity-template" data-activity-type="sketch" data-id="" data-timeline="" class="activity-template"><div style="display: table; width: 100%;"><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="0" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #f16521; vertical-align: middle; padding-left: 22px; padding-top: 40px; font-size: 20px; color: #666666;" class="account">&nbsp;</div></div><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/palette.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #f16521;"><div class="activity-widget"><div style="display: table; width: 100%;" class="element-table"><!-- Divider--><div style="display: table-row;"><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div><div style="display: table-cell;" class="divider"><hr style="margin-bottom: 8px; height: 1px; border: none; background-color: #dddddd;"></div></div><!-- Tags--><div style="display: table-row;"><div contenteditable="true" style="display: table-cell; min-width: 100%; vertical-align: middle; font-size: 20px; color: #666666; padding-left: 40px; background-image: url(./img/topic.png); background-size: 30px 30px; background-repeat: no-repeat; height: 30px;" class="tags"><!--img(src="./img/topic.png", width="30", height="30", style="padding: 0px 8px 0px 0px; margin: 0px; vertical-align: middle;")-->&nbsp;</div><div style="width: 150px; display: table-cell; text-align: left;" class="options">&nbsp;</div></div></div></div></div></div></div></li><li id="narration-activity-template" data-activity-type="narration" data-id="" data-timeline="" class="activity-template"><div style="display: table; width: 100%;"><!--div(style="display: table-row;")--><!--	div(style="display: table-cell; text-align: center; vertical-align: middle;")--><!--		img(src="./img/blank.png", width="50", height="0", style="padding: 10px;")--><!--	div(class="account", style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #f16521; vertical-align: middle; padding-left: 22px; padding-top: 40px; font-size: 20px; color: #666666;")--><!--		| &nbsp;--><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 2px solid #f16521;"><div class="activity-widget"><div style="display: table; width: 100%;" class="element-table"><!-- Core activity--><div style="display: table-row;" class="element"><div style="display: table-cell; min-width: 100%; vertical-align: middle; color: #666666;" contenteditable="true" class="text">-</div><div style="width: 150px; display: table-cell; text-align: right; vertical-align: top;" class="options"><!--img(class="open", src="./img/open.png")--><img src="./img/cross-gray.png" class="hide"></div></div></div></div></div></div></div></li></ul></div><!----><!-- Top of interface--><!----><div style="display: table; width: 100%; margin: 0px; margin-top: 0px; padding: 0px;"><!----><!-- ScienceKit logo (shown on "default" timeline)--><!----><div style="display: table-row;" id="sciencekit-logo"><div style="display: table-cell; text-align: center; vertical-align: middle; width: 30px;"><img src="./img/blank.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; width: 100%; border-left: 0px solid #f16521; padding-left: 10px;">&nbsp;</div></div><!----><!-- Timeline introductory text (e.g., "once upon a time")--><!----><!--div(style="display: table-row;", id="timeline-intro-text")--><!--	div(style="display: table-cell; text-align: center; vertical-align: middle; width: 30px;")--><!--		img(src="./img/blank.png", width="30", height="30", style="padding: 10px;")--><!--	div(style="display: table-cell; width: 100%; border-left: 2px solid #f16521; padding-left: 10px;")--><!--		p(id="beginning", class="tagline") all inquiry data--></div><!----><!-- Toolkit tool interfaces--><!----><ul id="toolkit-list"><li id="thought-activity-template" class="tool-template"><div style="display: table; width: 100%;"><!----><!-- Think/Do (Science/Art)--><!----><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="0" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 0px solid #f16521; vertical-align: middle; padding-left: 22px; padding-top: 10px; font-size: 20px; color: #666666;" class="account">What do you <strong>wonder</strong>? (Type/Create)</div></div><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/thought.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 0px solid #f16521;"><div class="tool-section"><div class="text-input-widget"><div style="display: table; width: 100%;" class="element-table"><div style="display: table-row;" class="element"><div style="display: table-cell; min-width: 100%; vertical-align: middle;" class="text"><input type="text" id="questionText"></div><div style="width: 75px; display: table-cell; text-align: right; vertical-align: middle;" class="options"><img id="hostAddressSave" src="./img/check.png" style="display: none;"><img id="hostAddressInvalid" src="./img/cross-red.png" style="display: none;"></div></div></div></div></div></div></div></div></li><li id="tool-extra-options" class="tool-template"><div style="display: table; width: 100%;"><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="0" style="padding: 0px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 0px solid #f16521; vertical-align: middle; padding-left: 0px; padding-top: 10px; font-size: 20px; color: #666666;"><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 70px; height: 1px; border: none; background-color: #dddddd;"></div></div><!----><!-- Collaborate--><!----><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="0" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 0px solid #f16521; vertical-align: middle; padding-left: 22px; padding-top: 10px; font-size: 20px; color: #666666;" class="account">Who else helped you with this just now? (Select everyone)</div></div><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 0px solid #f16521;"><div class="activity-widget"><div style="display: table; width: 100%;" class="element-table"><!-- Core activity--><div style="display: table-row;" class="element"><div id="collaborator-options" style="display: table-cell; min-width: 100%; vertical-align: middle;" class="text"></div></div></div></div></div></div><!----><!-- Feel--><!----><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="0" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 0px solid #f16521; vertical-align: middle; padding-left: 22px; padding-top: 10px; font-size: 20px; color: #666666;" class="account">How do you <strong>feel</strong>? (Choose one)</div></div><div style="display: table-row;"><div style="display: table-cell; text-align: center; vertical-align: middle;"><img src="./img/blank.png" width="50" height="50" style="padding: 10px;"></div><div style="display: table-cell; position: relative; z-index: 0; width: 100%; border-left: 0px solid #f16521;"><div class="activity-widget"><div style="display: table; width: 100%;" class="element-table"><!-- Core activity--><div style="display: table-row;" class="element"><div style="display: table-cell; min-width: 100%; vertical-align: middle;" class="text"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">scientist</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">artist</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">explorer</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">maker</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">dancer</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">happy</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">excited</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">intense</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">reflective</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">tired</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">confused</label><hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;"><input name="identity-options" id="scientist-option" value="scientist" type="radio"><label for="scientist">ambitious</label></div></div></div></div></div></div></div></li></ul><!----><!-- Timeline interface--><!----><ul id="narrative-list"></ul><div id="bottom" style="text-align: right; font-size: 30px; padding-right: 10px;" class="edge"><a href="javscript:void(0);" onclick="scrollToBottom();"> <img src="./img/down-arrow.png" alt="bottom" style="position: absolute; bottom: 0px; right: 0px;"></a></div><!----><!-- Bottom of interface--><!----><div style="display: table-row;" id="timeline-intro-text"><div style="display: table-cell; text-align: center; vertical-align: middle; width: 30px;"><img src="./img/blank.png" width="50" height="15" style="padding: 10px;"></div><div style="display: table-cell; width: 100%; border-left: 0px solid #f16521; padding-left: 10px;"><p id="beginning" class="tagline">&nbsp;</p></div></div><!----><!-- "Storybook" interface--><!----><div id="float-page" class="float-page"><div class="float-page-table"><p class="float-page-p">once upon a time</p></div></div><!----><!-- Photo page interface--><!----><div id="photo-page" class="float-page"><div class="float-page-table"><div class="float-page-row"><div style="text-align: right; vertical-align: middle; padding-right: 30px;" class="float-page-cell"><img src="./img/cross-gray.png" class="hide"></div></div><p class="float-page-p"><img src="./img/camera.png" width="900" height="900" class="photo"></p></div></div><!----><!-- Video page interface--><!----><div id="video-page" class="float-page"><div class="float-page-table"><div class="float-page-row"><div style="text-align: right; vertical-align: middle; padding-right: 30px;" class="float-page-cell"><img src="./img/cross-gray.png" class="hide"></div></div><div class="float-page-row"><p class="float-page-p"><video width="640" height="480" source="" controls class="video"></video></p></div></div></div><!----><!-- "Motion" tool interface--><!----><div id="motion-tool" class="tool-widget"><div class="tool-table"><!----><!-- Header--><!----><div class="tool-table-row"><div style="text-align: right; vertical-align: middle; padding-right: 30px; padding-top: 30px;" class="tool-table-cell"><img src="./img/cross-gray.png" class="close"></div></div><!----><!-- Body--><!----><div class="tool-table-row"><div style="vertical-align: middle; text-align: center; height: 100%; width: 100%;" class="tool-table-cell"><canvas width="768" height="512" style="background-color: #ffffff;" class="canvas"></canvas><!-- script to initialize canvas, graph event handlers--><!-- - set up handler to grab buffered data upon close, format it, send it to the server, get response, create new element--></div></div><!----><!-- Footer--><!----><div class="tool-table-row"><div class="tool-table-cell">&nbsp;</div></div></div></div><!----><!-- "Sketch" tool interface--><!----><div id="sketch-tool" class="tool-widget"><div class="tool-table"><!----><!-- Header--><!----><div class="tool-table-row"><div style="text-align: right; vertical-align: middle; padding-right: 30px; padding-top: 30px;" class="tool-table-cell"><img src="./img/cross-gray.png" class="close"></div></div><!----><!-- Body--><!----><div class="tool-table-row"><div style="vertical-align: middle; text-align: center; height: 100%; width: 100%;" class="tool-table-cell"><canvas width="768" height="512" style="background-color: #ffffff;" class="canvas"></canvas><!-- script to initialize canvas, graph event handlers--><!-- - set up handler to grab buffered data upon close, format it, send it to the server, get response, create new element--></div></div><!----><!-- Footer--><!----><div class="tool-table-row"><div class="tool-table-cell">&nbsp;</div></div></div></div><script>window.onload = function() {

 // Set up PhoneGap event listeners
 document.addEventListener("deviceready", onDeviceReady, false);
 
 //localStorage['host'] = 'http://192.168.1.41:3000';
 
 // Initialize web socket connection for real-time collaboration
 connectWebSocket();
 
 // Define interaction event listeners
 
 // Initialize GUI event listeners
 $('#outgoingChatMessage').keypress(function(event) {
  if(event.which == 13) {
   event.preventDefault();
   
   // var oauthAccessToken = $('#token_response').text(); // Get access token
   var oauthAccessToken = localStorage['token'];
   var messageText = $('#outgoingChatMessage').val();
   var message = JSON.stringify({ 'token': oauthAccessToken, 'message': messageText });
   
   console.log('Sending message: ' + message);
   socketio.send(message);
   $('#incomingChatMessages').append($('<li></li>').text($('#outgoingChatMessage').val()));
   $('#outgoingChatMessage').val('');
  }
 });
 
 
 
 
 
 
 // Initialize interface
 $('#float-page').hide();
 $('#photo-page').hide();
 $('#video-page').hide();
 $('#question-tool').hide();
 $('#motion-tool').hide();
 $('#sketch-tool').hide();
 
 $('#toolkit-list').hide();
 $('#toolkit-tool-options').hide();
 
 $('#previous-timeline-widget').hide();
 
 // Populate timeline
 getTimeline();
 
 // Synchronize Accounts
 getAccounts({}, function(accounts) {
  for(var i = 0; i < accounts.length; i++) {
   var option =
    '<input name="collaborators" id="account-' + accounts[i]._id + '" value="' + accounts[i]._id + '" type="checkbox" />' + 
    '<label for="account-' + accounts[i]._id + '">' + accounts[i].username + '</label>';
   if (i < accounts.length - 1) {
    option += '<hr style="margin-bottom: 14px; margin-top: 14px; margin-right: 0px; height: 1px; border: none; background-color: #dddddd;" />';
   }
   
   $('#collaborator-options').append(option);
  }
 });
 
 // Add handler for interrupting automatic scrolling
 $('body,html').bind("scroll mousedown DOMMouseScroll mousewheel keyup", function(e) {
  if ( e.which > 0 || e.type === "mousedown" || e.type === "mousewheel") {
   console.log('Canceling autoscrolling animation.');
   $("html,body").stop();
  }
 });
 
 $("#footer").slideUp();
 
 // Get Account
 // getAvatar();
 
 //scrollToBottom();
 
 // orientationchange
 
 // gesturestart
 
 // gesturechange
 
 // gestureend
}

// Show options when scroll up, hide when scroll down
var prevPosition = 0;
window.onscroll = function() {
 // console.log("scroll event detected! " + window.pageXOffset + " " + window.pageYOffset);
 
 var currPosition = window.pageYOffset;
 var delta = currPosition - prevPosition;
 prevPosition = currPosition;
 //console.log(delta);
 
 // Show or hide bottom shortcuts
 /*
 if(window.pageYOffset >= (document.height - window.innerHeight - 100)) {
  $("#footer").slideDown();
 } else if(delta > 10) {
  $("#footer").slideUp();
 } else if (delta < -10) {
  $("#footer").slideDown();
 }
 */
 
 // Update widget with focus (closest to center)
 /*
 var closestWidget = null;
 var closestDistance = -1;
 var timelineList = $('#narrative-list li').get();
 for(var i = 0; i < timelineList.length; i++) {
  $(timelineList[i]).find('.element .options').css('visibility', 'hidden');
  
  var widgetTop = Math.abs($(timelineList[i]).position().top - (currPosition + window.innerHeight / 2));
  if (closestDistance == -1 || (widgetTop < closestDistance)) {
   closestWidget = $(timelineList[i]);
   closestDistance = widgetTop;
  }
 }
 console.log('Widget with focus: ' + $(closestWidget).attr('id'));
 $(closestWidget).find('.element .options').css('visibility', 'visible');
 */
}

// Scroll to element

function generateStory() {
 // TODO: Take into account voting!
 
 // Show the introduction
 $('#float-page').fadeIn().delay(2000).fadeOut();
 
 // Generate list of "pages" to include in story
 var timelineList = $('#narrative-list li').get();
 var timelineHighlights = [ 0, 13, 19, 37, 55, 68 ];
 
 // Scroll through the pages
 $("html,body").stop().delay(1000);
 for(var i = 0; i < 6; i++) {
  $('html,body').animate({ scrollTop: $(timelineList[(timelineHighlights[i])]).offset().top }, 1000).delay(1000);
 }
 
 // Scroll to "end point" of story
 //$('html,body').animate({ scrollTop: $('#sciencekit-small-logo').offset().top }, 1000);
 $('html,body').animate({ scrollTop: document.body.scrollHeight }, 1000);
}

function generatePage() {
 // Show full-screen
 // Show controls for "next" and "previous" page
 // Let interact with page/timeline
}

function generatePhotoPage(event) {

 // Set image
 var imageUri = $(event.target).attr('src');
 $('#photo-page').find('.photo').attr('src', imageUri);
 
 // Show the introduction
 $('#photo-page').fadeIn();
 
 // Set up event handlers
 $('#photo-page').find('.hide').off('click');
 $('#photo-page').find('.hide').click(function () {
  $('#photo-page').fadeOut();
 });
}

function generateVideoPage(event) {

 // Set video
 var videoUri = $(event.target).find('.source').attr('src');
 $('#video-page').find('.video').attr('src', videoUri);
 
 // Show the introduction
 $('#video-page').fadeIn();
 
 // Set up event handlers
 $('#video-page').find('.hide').off('click');
 $('#video-page').find('.hide').click(function () {
  $('#video-page').fadeOut();
 });
}


function scrollToTop() {
 $('html,body').animate({ scrollTop: 0 }, 1000);
}

function scrollToBottom() {
 //$('html,body').animate({ scrollTop: $('#sciencekit-small-logo').offset().top }, 1000);
 //$('html,body').animate({ scrollTop: document.body.scrollHeight }, 1000);
 $('html,body').animate({ scrollTop: document.body.clientHeight }, 1000);
}

function scrollTickle() {
 var range = 70;
 var ms = 110;
 var iterations = 2;
 var position = $(window).scrollTop();
 for(var i = 0; i < iterations; i++) {
  $('html,body').animate({ scrollTop: position + range }, ms);
  $('html,body').animate({ scrollTop: position - range }, ms);
 }
 $('html,body').animate({ scrollTop: position }, ms);
 return false;
}</script></body></html>